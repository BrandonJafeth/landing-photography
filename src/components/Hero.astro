---
import { HeroGallery } from "@/components/react/HeroGallery";
import { supabase } from "@/lib/supabase";
import heroContentData from "@/data/hero.json";

// Obtener solo las imágenes del Hero desde Supabase
const { data: heroImagesData, error: imagesError } = await supabase
  .from("hero_images")
  .select("*")
  .eq("is_visible", true)
  .order("order", { ascending: true });

if (imagesError) {
  console.error("Error fetching hero images:", imagesError);
}

// Contenido del Hero desde JSON
const heroContent = heroContentData;

// Transformar imágenes de Supabase al formato esperado por el componente
const heroImages = (heroImagesData || []).map((img) => ({
  id: img.id,
  url: img.url,
  alt: img.alt,
}));
---

<section
  id="hero"
  class="relative h-[95vh] min-h-[700px] max-h-[750px] flex items-center justify-center overflow-hidden"
>
  {/* Galería de fondo (React Island para interactividad) */}
  <HeroGallery client:load images={heroImages} />

  {/* Contenido del Hero */}
  <div class="relative z-10 container mx-auto px-4 text-center">
    <h1
      class="text-4xl md:text-5xl lg:text-7xl font-bold text-white mb-6 animate-fade-in-up drop-shadow-2xl"
      style="animation-delay: 0.2s"
    >
      {heroContent.title}
    </h1>

    <p
      class="text-lg md:text-xl lg:text-2xl text-white/90 mb-8 max-w-3xl mx-auto animate-fade-in-up drop-shadow-lg"
      style="animation-delay: 0.4s"
    >
      {heroContent.subtitle}
    </p>

    <div
      class="flex flex-col sm:flex-row gap-4 justify-center animate-fade-in-up"
      style="animation-delay: 0.6s"
    >
      <a
        href={heroContent.primaryCta.link}
        class="px-8 py-4 bg-white text-black font-semibold rounded-lg hover:bg-gray-100 transition-all duration-300 shadow-md hover:shadow-lg hover:scale-105"
      >
        {heroContent.primaryCta.text}
      </a>

      <a
        href={heroContent.secondaryCta.link}
        class="px-8 py-4 bg-transparent border-2 border-white text-white font-semibold rounded-lg hover:shadow-lg hover:scale-105 hover:bg-white/10 transition-all duration-300 backdrop-blur-sm"
      >
        {heroContent.secondaryCta.text}
      </a>
    </div>
  </div>
</section>

<style>
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.8s ease-out forwards;
    opacity: 0;
  }

  /* Mejorar contraste del texto */
  h1,
  p {
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
  }
</style>
