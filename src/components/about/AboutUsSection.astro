---
// No necesita script de servidor
---

<section
  transition:name="sobre-mi"
  class="py-16 md:py-24 dark:bg-[#0a0a0a]"
>
  <div class="max-w-7xl mx-auto px-4">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center">
      {/* Imagen */}
      <div class="order-2 lg:order-1 flex justify-center lg:justify-start px-4">
        <div class="relative w-full max-w-[350px] sm:max-w-md">
          {/* Stack de fotos tipo Polaroid */}
          <div class="polaroid-stack">
            {/* Foto principal */}
            <div class="polaroid-card">
              <div class="polaroid-inner">
                <img
                  transition:name="images-aboutUs"
                  src="https://res.cloudinary.com/dxvbifdfb/image/upload/v1763477218/about-us/y7myjgivbto9akxm5jvf.jpg"
                  alt="Joel Gadea - Fotógrafo"
                  class="w-full h-full object-cover"
                  loading="lazy"
                />
              </div>
            </div>
            <!-- Foto de fondo 2 -->
            <div class="polaroid-card polaroid-back-2"></div>
          </div>
        </div>
      </div>

      {/* Contenido */}
      <div class="order-1 lg:order-2 px-4">
        <div class="space-y-6 text-center">
          <div>
            <p class="text-3xl md:text-4xl font-semibold text-black dark:text-white uppercase mb-4">
              SOBRE MÍ
            </p>
            <h2 class="text-lg font-semibold text-[#000000]/75 dark:text-white/80 leading-tight">
              Cada foto es un reflejo auténtico de tu vida
            </h2>
          </div>

          <div  transition:name="description-aboutUs" class="space-y-4 text-lg text-[#000000]/70 dark:text-gray-400 leading-relaxed">
            <p>
              Hola soy
              <span class="font-semibold text-[#000000] dark:text-white">
                {' '}Joel Gadea
              </span>
              , un fotógrafo profesional con más de 2 años de experiencia
              capturando momentos únicos y especiales. Mi pasión por la
              fotografía comenzó cuando descubrí que una imagen puede contar
              mil historias y preservar emociones para siempre.
            </p>

            {/* Contenido expandible - solo mobile/tablet */}
            <div class="lg:hidden">
              <div
                data-about-content
                class="about-expandable"
              >
                <div class="space-y-4 pt-4">
                  <p>
                    A lo largo de mi carrera, he tenido el privilegio de
                    documentar bodas, celebraciones, eventos corporativos y
                    sesiones de retratos que han dejado una huella imborrable
                    en la vida de mis clientes. Mi enfoque se centra en
                    capturar la esencia genuina de cada momento, sin poses
                    forzadas, solo autenticidad y emoción real.
                  </p>
                  <p>
                    Creo firmemente que cada proyecto es único y merece un
                    tratamiento personalizado. Por eso, trabajo estrechamente
                    con mis clientes para entender su visión y crear imágenes
                    que no solo cumplan, sino que superen sus expectativas.
                  </p>
                </div>
              </div>

              {/* Botón Ver más/Ver menos */}
              <button
                type="button"
                data-about-toggle
                style="display: none;"
                class="mt-4 inline-flex items-center gap-2 text-sm font-medium text-black dark:text-white hover:underline transition-all"
              >
                <span data-about-label>Ver más</span>
                <svg
                  class="w-4 h-4 transition-transform"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  data-about-icon
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                  />
                </svg>
              </button>
            </div>

            {/* Contenido completo - siempre visible en desktop */}
            <div class="hidden lg:block space-y-4">
              <p>
                A lo largo de mi carrera, he tenido el privilegio de
                documentar bodas, celebraciones, eventos corporativos y
                sesiones de retratos que han dejado una huella imborrable en
                la vida de mis clientes. Mi enfoque se centra en capturar la
                esencia genuina de cada momento, sin poses forzadas, solo
                autenticidad y emoción real.
              </p>
              <p>
                Creo firmemente que cada proyecto es único y merece un
                tratamiento personalizado. Por eso, trabajo estrechamente con
                mis clientes para entender su visión y crear imágenes que no
                solo cumplan, sino que superen sus expectativas.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Pequeño script vanilla para el "Ver más / Ver menos" en mobile
  if (typeof window !== 'undefined') {
    window.addEventListener('DOMContentLoaded', () => {
      const btn = document.querySelector('[data-about-toggle]') as HTMLElement;
      const content = document.querySelector('[data-about-content]') as HTMLElement;
      const label = document.querySelector('[data-about-label]');
      const icon = document.querySelector('[data-about-icon]') as HTMLElement;

      if (!btn || !content || !label || !icon) return;

      // Verificar si hay contenido
      const hasContent = content.innerText.trim().length > 0;
      
      if (hasContent) {
        btn.style.display = ''; // Remove display: none to let CSS take over
      } else {
        return; // Keep hidden
      }

      let expanded = false;

      const updateState = () => {
        if (expanded) {
          content.style.maxHeight = content.scrollHeight + "px";
          content.style.opacity = "1";
          label.textContent = 'Ver menos';
          icon.style.transform = 'rotate(180deg)';
        } else {
          content.style.maxHeight = "0px";
          content.style.opacity = "0";
          label.textContent = 'Ver más';
          icon.style.transform = 'rotate(0deg)';
        }
      };

      btn.addEventListener('click', () => {
        expanded = !expanded;
        updateState();
      });

      // estado inicial
      updateState();
    });
  }
</script>

<style>
  .polaroid-stack {
    position: relative;
    width: 100%;
    margin: 0 auto;
  }

  .polaroid-card {
    position: relative;
    width: 100%;
    aspect-ratio: 4 / 5;
    background: #fff;
    border: 4px solid #000;
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.45);
    transition: transform 0.25s ease;
  }

  .polaroid-inner {
    width: 100%;
    height: 100%;
    padding: 3%;
    padding-bottom: 8%;
    background: #fff;
  }

  .polaroid-inner img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .polaroid-back-2 {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    aspect-ratio: 4 / 5;
    background: #e8e8e8;
    transform: rotate(4deg) translateY(-4%);
    z-index: -1;
  }

  .polaroid-stack:hover .polaroid-card:first-child {
    transform: rotate(-2deg);
  }

  /* Dark mode (usar :global para el selector .dark) */
  :global(.dark) .polaroid-card {
    background: #1a1a1a;
    border-color: #fff;
  }

  :global(.dark) .polaroid-inner {
    background: #1a1a1a;
  }

  :global(.dark) .polaroid-back-2 {
    background: #2a2a2a;
  }

  /* Contenido expandible mobile */
  .about-expandable {
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
  }
</style>
